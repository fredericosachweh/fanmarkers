{% extends "base.html" %}


{%block title%}{{c.name}} - Company Profile{% endblock %}

{% block css %}
<style type="text/css">
	.alert			{color: darkred; font-weight: bold}

	.operation_box		{border: 3px solid black; margin: 1em; padding: 1em; padding-top: 0px}
	
	.edit_op_icon		{float: right; margin-top: 10px; border: 0px solid black}
	
	.fleet_box		{border: 1px solid black; margin-top: 0.5em; margin-bottom: 0.5em; background: lightgray; padding: .5em}
</style>
{% endblock %}

{% block body %}
	<div id="main_container">
	
		{% if not_found %}
		
			<h1>Company Does Not Exist</h1>
		
		{% endif %}
		
			{# ------------company info--------------------------------- #}
		
			<h1>
				{% if user.is_authenticated %}
				<a href="/edit/company/{{c.pk}}" class="edit_link">
					<img src="{{ MEDIA_URL }}/icons/edit.png" alt="Click to edit" />
				</a>
				{% endif %}
				
				{{ c.name }}
			</h1>
			{{ c.call_sign }}<br />
			{% if c.website %}
				<a href="{{c.website}}">{{c.website}}</a>
			{% endif %}
			
			
			
			{% for op in c.operation_set.all %}
			<div class="operation_box">
				{% if user.is_authenticated %}
				<div class="edit_op_icon">
					<a href="/edit/operation/{{op.pk}}" class="edit_link">
						<img src="{{ MEDIA_URL }}/icons/edit.png" alt="Click to edit" />
					</a>
				</div>
				{% endif %}
			
				{# ------------position box--------------------------------- #}
			
				{% for pos in op.positions.all %}
				<h2>
					<a href="/position/{{pos.pk}}">{{pos.name}}</a>
					{% if forloop.first %}<a name="op{{op.pk}}"></a>{% endif %}
				</h2>
				{% endfor %}
				
				{# ------------fleet below---------------------------------- #}
					
				{% for f in op.fleet.all %}
				<div class="fleet_box">
					<a href="/aircraft/{{ f.aircraft.type }}">{{ f.aircraft }}</a> ({{ f.size }})
				</div>
				{% endfor %}
				
				{# -------------bases below--------------------------------- #}
					
				{% for ob in op.opbase_set.all %}
				<ul>
					<li>
						<a href="/airport/{{ ob.base.identifier }}">{{ ob.base.display_name }}</a> {{ ob.get_hiring_status_display }}
						<br />
						<small>{{ ob.base.municipality }}, {{ ob.base.region }}{% ifnotequal ob.base.country "United States"%}, {{ ob.base.country }}{% endifnotequal %}</small>
					</li>
				</ul>
				{% endfor %}
			</div>		
			{% endfor %}

	</div>
{% endblock %}
